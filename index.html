<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editor Científico Visual</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="toolbar" contenteditable="false">
    <div class="group">
      <button class="section-toggle">▶ Mate₂máticas</button>
      <div class="section">
        <button onclick="insertSup()">x²</button>
        <button onclick="insertSub()">H₂O</button>
        <button onclick="insertFraction()">a/b</button>
        <button onclick="insertEMC()">E = mc²</button>
        <button onclick="insertSymbol('∑')">∑</button>
        <button onclick="insertSymbol('∂')">∂</button>
        <button onclick="insertSymbol('∫')">∫</button>
        <button onclick="insertSymbol('∆')">∆</button>
        <button onclick="insertSymbol('∞')">∞</button>
      </div>
    </div>

    <div class="group">
      <button class="section-toggle">▶ Física / Química</button>
      <div class="section">
        <button onclick="insertSymbol('→')">→</button>
        <button onclick="insertSymbol('⇌')">⇌</button>
        <button onclick="insertSymbol('°C')">°C</button>
      </div>
    </div>

    <div class="group">
      <button class="section-toggle">▶ Símbolos Griegos</button>
      <div class="section">
        <button onclick="insertSymbol('α')">α</button>
        <button onclick="insertSymbol('β')">β</button>
        <button onclick="insertSymbol('γ')">γ</button>
        <button onclick="insertSymbol('θ')">θ</button>
        <button onclick="insertSymbol('λ')">λ</button>
        <button onclick="insertSymbol('π')">π</button>
      </div>
    </div>

    <div class="group">
      <button class="section-toggle">▶ Referencias</button>
      <div class="section">
        <input type="text" id="newReference" placeholder="Ej: Autor, Título, Año" style="width: 80%;">
        <button onclick="addReference()">Agregar Referencia</button>
        <ul id="referenceList" class="reference-list"></ul>
      </div>
    </div>
  </div>

  <div id="controls">
    <button onclick="saveContent()">💾 Guardar ahora</button>
    <button onclick="resetContent()">🔁 Reiniciar documento</button>
    <button onclick="exportHTML()">📄 Exportar HTML</button>
    <button onclick="exportDocx()">📃 Exportar DOCX</button>
    <button onclick="exportPDF()">📕 Exportar PDF</button>
    <button onclick="openPreview()">🖼 Vista previa</button>
    <button onclick="toggleDarkMode()">🌙 Modo oscuro</button>
    <input type="file" id="imageInput" accept="image/*" style="display:none" onchange="insertImage(event)">
    <button onclick="document.getElementById('imageInput').click()">🖼 Insertar imagen</button>
    <button onclick="insertHeading(1)">Título 1</button>
    <button onclick="insertHeading(2)">Título 2</button>
    <button onclick="insertHeading(3)">Título 3</button>

    <select id="pageSize" onchange="updatePageStyle()">
      <option value="A4">📄 A4</option>
      <option value="letter">📄 Carta</option>
    </select>

    <select id="orientation" onchange="updatePageStyle()">
      <option value="portrait">📐 Vertical</option>
      <option value="landscape">📐 Horizontal</option>
    </select>

    <label>Márgenes:
      <input type="number" id="marginInput" value="2" min="0" max="10" step="0.1" onchange="updatePageStyle()"> cm
    </label>

    <button onclick="undo()">⏪ Deshacer</button>
    <button onclick="redo()">⏩ Rehacer</button>
    <button onclick="saveDocument()">💾 Guardar</button>
    <button onclick="toggleHistory()">🕰️ Mostrar historial</button>
  </div>

  <div id="historyPanel">
    <h3>🕰️ Historial</h3>
    <ul id="historyList"></ul>
    <button onclick="clearHistory()">🗑️ Limpiar historial</button>
  </div>

  <div id="previewOverlay" class="preview-overlay" onclick="closePreview()">
    <div class="preview-window" onclick="event.stopPropagation()">
      <h3>Vista previa</h3>
      <div id="previewContent" class="preview-content"></div>
      <button onclick="closePreview()">Cerrar vista previa</button>
    </div>
  </div>

  <div id="header" contenteditable="true" class="header-footer">Encabezado del documento</div>
  <div id="editor" contenteditable="true"></div>

  <div id="referenceSection">
    <h3>Referencias</h3>
    <ol id="referenceDisplay"></ol>
  </div>

  <div id="footer" contenteditable="true" class="header-footer">Pie de página</div>

  <div id="counter">
    Palabras: <span id="wordCount">0</span> |
    Caracteres (con espacios): <span id="charCount">0</span> |
    Caracteres (sin espacios): <span id="charCountNoSpaces">0</span>
  </div>

  <div id="previewModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="closePreview()">&times;</span>
      <div id="previewContent"></div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
